(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{34:function(t,r,e){"use strict";e.r(r);var o=e(0),s=e.n(o),a=e(3),n=e(14),i=e.n(n),m=(e(9),e(6)),l=e.n(m);function c(t,r,e,o,s,a,n){try{var i=t[a](n),m=i.value}catch(t){return void e(t)}i.done?r(m):Promise.resolve(m).then(o,s)}function f(t){return function(){var r=this,e=arguments;return new Promise(function(o,s){var a=t.apply(r,e);function n(t){c(a,o,s,n,i,"next",t)}function i(t){c(a,o,s,n,i,"throw",t)}n(void 0)})}}var d={middleware:"guest",metaInfo:function(){return{title:this.$t("register")}},data:function(){return{form:new a.Form({name:"",national_id:"",phone:"",city:"",address:"",passport_no:"",employer:"",email:"",bank:"",branch:"",password:"",password_confirmation:"",verify_code:""}),mustVerifyPhone:!1}},created:function(){var t=this;l.a.get("/api/guest").then(function(r){var e=r.data;t.form=new a.Form(e)})},methods:{back:function(){this.mustVerifyPhone=!1},resend:function(){this.mustVerifyPhone=!1},verify:function(){var t=f(s.a.mark(function t(){var r,e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.post("/api/register");case 2:r=t.sent,0==(e=r.data).verified&&i.a.fire({type:"error",title:"خطأ في التفعيل!",text:"ارجو التأكد من رمز التفعيل!"}),1==e.verified&&1==e.registered&&(i.a.fire("تم عملية التسجيل بنجاح!","سيتم التواصل معك قريبا.","success"),this.$router.push({name:"login"}));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),register:function(){var t=f(s.a.mark(function t(){var r,e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.form.post("/api/validate-registration");case 2:r=t.sent,1==(e=r.data).valid&&1==e.verify&&(this.$store.dispatch("registration/saveGuest",this.form),this.mustVerifyPhone=!0);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},v=e(1),p=Object(v.a)(d,function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-10 m-auto"},[t.mustVerifyPhone?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v("\n      "+t._s(t.$t("verify_phone_number"))+"\n    ")]):t._e(),t._v(" "),t.mustVerifyPhone?e("card",{attrs:{title:t.$t("register"),subtitle:"الرجاء ادخل رمز التفعيل"}},[e("form",{on:{submit:function(r){return r.preventDefault(),t.verify(r)},keydown:function(r){return t.form.onKeydown(r)}}},[e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("phone")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone,expression:"form.phone"},{name:"mask",rawName:"v-mask",value:"(##)###-####",expression:"'(##)###-####'"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("phone")},staticStyle:{"text-align":"end"},attrs:{dir:"ltr",type:"text",name:"phone",placeholder:"(91)999-9999"},domProps:{value:t.form.phone},on:{input:function(r){r.target.composing||t.$set(t.form,"phone",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"phone"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("verify_code")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.verify_code,expression:"form.verify_code"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("verify_code")},attrs:{type:"text",name:"verify_code"},domProps:{value:t.form.verify_code},on:{input:function(r){r.target.composing||t.$set(t.form,"verify_code",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"verify_code"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center mt-4"},[e("div",{staticClass:"col-md-10 d-flex justify-content-between"},[e("v-button",{attrs:{loading:t.form.busy,type:"success"}},[t._v("\n              تأكيد\n            ")]),t._v(" "),e("a",{staticClass:"btn btn-lg btn-light",on:{click:function(r){return r.preventDefault(),t.register(r)}}},[t._v("\n              اعادة ارسال\n            ")])],1)])])]):e("card",{attrs:{title:t.$t("register"),subtitle:"الرجاء ادخل البيانات المطلوبة"}},[e("form",{on:{submit:function(r){return r.preventDefault(),t.register(r)},keydown:function(r){return t.form.onKeydown(r)}}},[e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("name")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{type:"text",name:"name"},domProps:{value:t.form.name},on:{input:function(r){r.target.composing||t.$set(t.form,"name",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"name"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("national_id")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.national_id,expression:"form.national_id"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("national_id")},attrs:{type:"text",name:"national_id"},domProps:{value:t.form.national_id},on:{input:function(r){r.target.composing||t.$set(t.form,"national_id",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"national_id"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("passport_no")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.passport_no,expression:"form.passport_no"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("passport_no")},attrs:{type:"text",name:"passport_no"},domProps:{value:t.form.passport_no},on:{input:function(r){r.target.composing||t.$set(t.form,"passport_no",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"passport_no"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("employer")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.employer,expression:"form.employer"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("employer")},attrs:{type:"text",name:"employer"},domProps:{value:t.form.employer},on:{input:function(r){r.target.composing||t.$set(t.form,"employer",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"employer"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("email")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("email")},attrs:{type:"email",name:"email"},domProps:{value:t.form.email},on:{input:function(r){r.target.composing||t.$set(t.form,"email",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"email"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-10"},[e("label",[t._v(t._s(t.$t("phone")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone,expression:"form.phone"},{name:"mask",rawName:"v-mask",value:"(##)###-####",expression:"'(##)###-####'"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("phone")},staticStyle:{"text-align":"end"},attrs:{dir:"ltr",type:"text",name:"phone",placeholder:"(91)999-9999"},domProps:{value:t.form.phone},on:{input:function(r){r.target.composing||t.$set(t.form,"phone",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"phone"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("branch")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.branch,expression:"form.branch"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("branch")},attrs:{type:"text",name:"branch"},domProps:{value:t.form.branch},on:{input:function(r){r.target.composing||t.$set(t.form,"branch",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"branch"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("bank")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bank,expression:"form.bank"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("bank")},attrs:{type:"text",name:"bank"},domProps:{value:t.form.bank},on:{input:function(r){r.target.composing||t.$set(t.form,"bank",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"bank"}})],1)])]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("city")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.city,expression:"form.city"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("city")},attrs:{type:"text",name:"city"},domProps:{value:t.form.city},on:{input:function(r){r.target.composing||t.$set(t.form,"city",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"city"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("address")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("address")},attrs:{type:"text",name:"address"},domProps:{value:t.form.address},on:{input:function(r){r.target.composing||t.$set(t.form,"address",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"address"}})],1)])]),t._v(" "),e("div",{staticClass:"form-group row justify-content-center"},[e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("password")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password")},attrs:{type:"password",name:"password"},domProps:{value:t.form.password},on:{input:function(r){r.target.composing||t.$set(t.form,"password",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"password"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("confirm_password")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation"},domProps:{value:t.form.password_confirmation},on:{input:function(r){r.target.composing||t.$set(t.form,"password_confirmation",r.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"password_confirmation"}})],1)])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-md-10 offset-md-1 d-flex"},[e("v-button",{attrs:{loading:t.form.busy}},[t._v("\n              "+t._s(t.$t("register"))+"\n            ")])],1)])])])],1)])},[],!1,null,null,null);r.default=p.exports}}]);